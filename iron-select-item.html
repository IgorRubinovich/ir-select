<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<dom-module id="iron-select-item">
  <style>
	:host {
		margin : 0;
		padding : 0
		transition : all 1s;
	}
	
    @media (max-width: 600px) {
      h1.paper-font-display1 {
        font-size: 24px;
      }
    }
	iron-icon {
		width : 15px;
		height : 15px;
		color : #555;
		transition : all .1s;
		border-radius : 15px;
	}
	iron-icon:hover {
		color : #333;
	}
	.iron-select-item-default {
		border : 1px solid lightgrey;
		margin-right : 3px;
		transition : all .05s;
		display : inline-block;
		padding : 3px;
	}
	.iron-select-item-focus {
		border : 1px solid #aaa;		
		transform : translate(-1px,-1px);
		box-shadow : 0px 0px 1px #aaa;
	}
	:host .remove
	{
		transition : .3s;
		transform-origin : 0% 50%;
		transform : scaleX(0);
		alpha : .7;
	}
	
  </style>
  <template>
    <!-- Listens for "input" event and sets inputLabel to <input>.value -->
    <!-- input class="iron-font-body2" value="{{inputLabel::input}}" -->

		<span id="container" class="iron-select-item-default">
			<content></content>
			<iron-icon id="close" on-click="close" icon='cancel'></iron-icon>
		</span>
  </template>
</dom-module>
<script>
(function () {
	Polymer({
		is : 'iron-select-item',
		showLoadedOptions : function(e) {
			//this.options = this.lastResponse;
			//console.log('loaded some data: ', e.response, this.lastResponse, this.lastError);
		},
		close :	function close()
		{
			this.blur();
			this.$.container.classList.add('remove');
			Polymer.dom.flush();

			this.fire('item-close', this);
		},
		properties : {
			value: { type : String,	value : '',	notify : true },
			label: { type : String,	value : '',	notify : true, observer : "_labelChanged"  },
		},		
		_labelChanged : function() {
			Polymer.dom(this).innerHTML = this.label;
			console.log('setting label', this.label);
		},
		
		toObject: function (labelKey, valueKey) {
			var res = {};
			res[labelKey || 'label'] = this.label;
			res[valueKey || 'value'] = this.value;

			return res;
		},
		focus: function() {
			this.$.container.classList.add('iron-select-item-focus');
			Polymer.dom.flush();
		},
		blur: function() {
			this.$.container.classList.remove('iron-select-item-focus')
		},
		ready : function() {
			var content = Polymer.dom(this.root).querySelector('content');
			var preset = Polymer.dom(content).getDistributedNodes()[0];

			if(preset && !this.label)
				this.label = preset.textContent;
		},
		attached: function () {
			console.log('item attached');
			this.fire('item-attached', this);
		}
	});
	
})();
	

</script>
